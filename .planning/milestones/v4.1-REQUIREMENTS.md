# Requirements Archive: v4.1 Dependency Upgrades & Facebook Fix

**Milestone:** v4.1
**Archived:** 2026-02-22

---

## Requirements Status

### Completed in v4.1

| ID | Requirement | Status | Notes |
|----|-------------|--------|-------|
| REQ-1 | Fix Facebook annotation: replace broken `div[role='article'][aria-posinset]` approach with `data-ad-rendering-role` based detection | ✓ Complete | Working with new DOM structure |
| REQ-2 | Domain extraction via `[data-ad-rendering-role="meta"]` textContent (primary) with FB page path fallback | ✓ Complete | Primary method works well |
| REQ-3 | Annotation insertion before engagement block (`[data-ad-rendering-role="like_button"]` container) | ✓ Complete | Clean insertion point |
| REQ-4 | Upgrade Plasmo from 0.84.2 → latest | ✓ Complete | Now at 0.90.5 |
| REQ-5 | Upgrade React from 18.2.0 → latest 18.x | ✓ Complete | Now at 18.3.1 |
| REQ-6 | Upgrade TypeScript from 5.3.3 → 5.7.x | ✓ Complete | Now at 5.9.3 |
| REQ-7 | Upgrade ESLint from v5.x → v8.x | ✓ Complete | Now at 8.56.0 |
| REQ-8 | Verify Node.js 22+ compatibility | ✓ Complete | Engine set to >=24 |
| REQ-9 | Verify Manifest V3 compliance after upgrades | ✓ Complete | MV3 working |

### Bonus Features (Unplanned)

| ID | Requirement | Status | Notes |
|----|-------------|--------|-------|
| BONUS-1 | Add News Search button for Facebook posts | ✓ Complete | Configurable feature |
| BONUS-2 | Add option to disable News Search button | ✓ Complete | User preference |

---

## Outcomes

**All planned requirements met** plus bonus News Search feature added during development.

### Key Technical Decisions Validated

1. **`data-ad-rendering-role` detection** — Proved stable and reliable across Facebook feed variations
2. **Meta textContent for domain** — More accurate than FB page path lookup
3. **ESLint v8** — Migration was straightforward, no issues

### Not Addressed (Deferred)

- React 19 upgrade — stayed on 18.x for stability
- ESLint v9 flat config — deferred to future milestone

---

_Archived from PROJECT.md Active requirements, 2026-02-22_
